var infiniteList=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.off=e.fire=e.on=void 0;var r=(n(1),{});e.on=function(t,e){r[t]=r[t]||[],r[t].push(e)},e.fire=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var o=e[0],i=r[o]=r[o]||[],a=0;a<i.length;a++)i[a].apply(void 0,e.slice(1))},e.off=function(t,e){setTimeout(function(){r[t]=r[t]||[];for(var n=0;n<r[t].length;n++)r[t][n]===e&&r[t].splice(n,1)},0)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.isFn=function(t){return"[object Function]"===Object.prototype.toString.call(t)},e.hasOwnProperty=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.extend=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e[0],o=e.slice(1),i=0;i<o.length;i++){var a=o[i];for(var s in a)r[s]=a[s]}return r},e.raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame},function(t,e,n){"use strict";t.exports=n(6)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=r(o),a=n(1),s=n(0),u=function(t,e){var n=t.attrs.options;n.hasMore&&(e=e?e:"fetch",(0,s.fire)(e+":before"),n.fetch(n.cursor).then(function(t){return(0,s.fire)(e+":after",t)}))},f=function(t){var e=t.dom.getBoundingClientRect(),n=window.innerHeight;e.bottom-n<t.attrs.options.triggerDistance&&u(t)},c=function t(e,n){n=n?n:"fetch",u(e,n);var r=function r(){setTimeout(function(){e.dom.getBoundingClientRect().bottom-window.innerHeight<e.attrs.options.triggerDistance&&t(e,n),(0,s.off)(n+":after",r)},0)};(0,s.on)(n+":after",r)},l=function(t,e){document.body.scrollTop>0||(e.state.touchStatus="start",e.state.touchY=t.touches[0].clientY,(0,s.fire)("pull:start"))},d=function(t,e){"end"!==e.state.touchStatus&&(e.state.touchStatus="end",(0,s.fire)("pull:end"))},h=function(t,e){(0,a.raf)(function(){"end"!==e.state.touchStatus&&(t.touches[0].clientY<=e.state.touchY||(t.preventDefault(),(0,s.fire)("pull:move")))})},p=function(t){t.state.touchStatus="end",t.state.touchEvents={ontouchstart:function(e){return l(e,t)},ontouchend:function(e){return d(e,t)},ontouchmove:function(e){return h(e,t)}}},v=function(t){var e=t.attrs.options,n=t.state.list,r=t.state.loading;t.attrs.options.pullRefreshable&&p(t),(0,s.on)("onscroll",function(){r()||f(t)}),(0,s.on)("pull:refresh",function(){n([]),e.cursor=1,e.hasMore=!0,c(t,"refresh")}),(0,s.on)("refresh:after",function(t){n(n().concat(t)),e.cursor+=e.step}),(0,s.on)("fetch:before",function(){r(!0)}),(0,s.on)("fetch:after",function(t){n(n().concat(t)),r(!1),e.cursor+=e.step,(e.maxCursor>0&&e.cursor>e.maxCursor||!t.length)&&(e.hasMore=!1)})},g=function(t){c(t,"fetch")},_=function(t){var e=t.state,n=t.attrs.options,r=n.item;return m(n.rootTag,e.touchEvents,t.state.list.map(function(t){return t.map(function(t,e){return m(r,{data:t,index:e})})})())};e.default={loading:(0,i.default)(!1),list:(0,i.default)([]),oninit:v,oncreate:g,view:_}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(t){var e=t.state;t.attrs;e.style={height:0,visibility:"hidden",textAlign:"center"}},i=function(t){var e=t.state,n=e.style;(0,r.on)("fetch:before",function(){n.visibility="visible",n.height="inherit",m.redraw()}),(0,r.on)("fetch:after",function(){n.visibility="hidden",n.height=0,m.redraw()})},a=function(t){return m("div",{style:t.state.style},[m("span",t.attrs.options.loadingText)])};e.default={oninit:o,oncreate:i,view:a}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=r(o),a=n(0),s=n(1),u=function(t){var e=t.state,n=t.attrs.options;e.style={height:"0px",overflow:"hidden",textAlign:"center"},e.render=i.default.combine(function(t,e){return t()?n.refreshText:e()?n.refreshingText:n.pullDownText},[e.readyRefresh,e.refreshing])},f=function t(e,n,r){r=r||0,(0,s.raf)(function(){e.state.height-=n,e.state.style.height=e.state.height+"px",m.redraw(),e.state.height>=r?t(e,n,r):(e.state.style.height=r+"px",m.redraw())})},c=function(t){var e=t.attrs.options,n=t.dom,r=t.state.height/10,o=t.state.readyRefresh,i=t.state.refreshing;(0,a.on)("pull:start",function(){o(!1),t.state.height=0,t.state.style.height="0px",m.redraw()}),(0,a.on)("pull:end",function(){t.attrs.options.pullLimitHeight<=t.state.height?(f(t,r,n.children[0].offsetHeight),(0,a.fire)("pull:refresh")):f(t,r,0)}),(0,a.on)("pull:move",function(){(0,s.raf)(function(){e.pullLimitHeight<=t.state.height&&o(!0),t.state.height+=(e.pullLimitHeight-t.state.height)/e.pullLimitHeight+1,t.state.style.height=t.state.height+"px",m.redraw()})}),(0,a.on)("refresh:before",function(){i(!0),m.redraw()}),(0,a.on)("refresh:after",function(){i(!1),m.redraw(),f(t,r,0)})},l=function(t){return m("div",{style:t.state.style},[m("span",t.state.render())])};e.default={readyRefresh:(0,i.default)(!1),refreshing:(0,i.default)(!1),oninit:u,oncreate:c,view:l}},function(t,e,n){"use strict";!function(){function e(){function t(){return arguments.length>0&&arguments[0]!==O&&r(t,arguments[0]),t._state.value}return n(t),arguments.length>0&&arguments[0]!==O&&r(t,arguments[0]),t}function n(t){t.constructor=e,t._state={id:b++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},t.map=t["fantasy-land/map"]=l,t["fantasy-land/ap"]=d,t["fantasy-land/of"]=e,t.valueOf=h,t.toJSON=p,t.toString=h,Object.defineProperties(t,{end:{get:function(){if(!t._state.endStream){var n=e();n.map(function(e){return e===!0&&(c(t),n._state.unregister=function(){c(n)}),e}),t._state.endStream=n}return t._state.endStream}}})}function r(t,e){o(t,e);for(var n in t._state.deps)i(t._state.deps[n],!1);null!=t._state.unregister&&t._state.unregister(),a(t)}function o(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function i(t,e){var n=t._state,r=n.parents;if(r.length>0&&r.every(g)&&(e||r.some(m))){var i=t._state.derive();if(i===O)return!1;o(t,i)}}function a(t){t._state.changed=!1;for(var e in t._state.deps)t._state.deps[e]._state.changed=!1}function s(t,n){if(!n.every(v))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return u(e(),n,function(){return t.apply(this,n.concat([n.filter(m)]))})}function u(t,e,n){var r=t._state;return r.derive=n,r.parents=e.filter(_),f(t,r.parents),i(t,!0),t}function f(t,e){for(var n=0;n<e.length;n++)e[n]._state.deps[t._state.id]=t,f(t,e[n]._state.parents)}function c(t){for(var e=0;e<t._state.parents.length;e++){delete t._state.parents[e]._state.deps[t._state.id]}for(var n in t._state.deps){var r=t._state.deps[n],o=r._state.parents.indexOf(t);o>-1&&r._state.parents.splice(o,1)}t._state.state=2,t._state.deps={}}function l(t){return s(function(e){return t(e())},[this])}function d(t){return s(function(t,e){return t()(e())},[t,this])}function h(){return this._state.value}function p(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function v(t){return t._state}function g(t){return 1===t._state.state}function m(t){return t._state.changed}function _(t){return 2!==t._state.state}function y(t){return s(function(){return t.map(function(t){return t()})},t)}function w(t,e,n){var r=s(function(n){return e=t(e,n._state.value)},[n]);return 0===r._state.state&&r(e),r}function x(t,e){var n=t.map(function(t){var e=t[0];return 0===e._state.state&&e(void 0),e});return s(function(){var r=arguments[arguments.length-1];return n.forEach(function(n,o){r.indexOf(n)>-1&&(e=t[o][1](e,n._state.value))}),e},n)}var b=0,O={};e["fantasy-land/of"]=e,e.merge=y,e.combine=s,e.scan=w,e.scanMerge=x,e.HALT=O,t.exports=e}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(4),i=r(o),a=n(1),s=n(0),u=n(3),f=r(u),c=n(5),l=r(c),d={rootTag:"ul",cursor:1,step:1,maxCursor:0,hasMore:!0,triggerDistance:200,pullRefreshable:!1,loadingText:"正在加载",pullDownText:"下拉刷新",refreshText:"松开刷新",refreshingText:"正在加载",noMoreText:"没有更多数据",pullLimitHeight:60,item:{},fetch:function(){throw new Error("You must declare `fetch` function.")}},h=function(t){(0,a.extend)(t.state,d,t.attrs)},p=function(t){var e=t.state;e.onscroll=function(){(0,a.raf)(function(){(0,s.fire)("onscroll")})},window.addEventListener("scroll",e.onscroll)},v=function(t){var e=t.state;return m("div",[m(l.default,{options:e}),m(f.default,{options:e}),m(i.default,{options:e}),m("div",{style:{textAlign:"center"}},e.hasMore?null:e.noMoreText)])},g=function(t){window.removeEventListener("scroll",t.state.onscroll)},_={oninit:h,oncreate:p,view:v,onremove:g,on:s.on,fire:s.fire};t.exports=_}]);